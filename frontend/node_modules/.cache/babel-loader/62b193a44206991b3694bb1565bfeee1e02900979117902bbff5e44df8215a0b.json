{"ast":null,"code":"import React,{useEffect,useState}from'react';import StudentForm from'./components/StudentForm';import LoginForm from'./components/LoginForm';import SignupForm from'./components/SignupForm';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const COURSES=['Mathematics','Physics','Computer Science','Chemistry','Biology','History','Economics','Philosophy','Engineering','Art'];function App(){const[students,setStudents]=useState([]);const[message,setMessage]=useState(null);const[user,setUser]=useState(null);// logged-in user\nconst[showSignup,setShowSignup]=useState(false);// toggle signup/login\n// fetch students only if logged in\nuseEffect(()=>{if(user)fetchStudents();},[user]);async function fetchStudents(){try{const res=await fetch('http://127.0.0.1:5000/students');if(!res.ok)throw new Error('Network response not ok');const data=await res.json();setStudents(data);}catch(err){console.error('Fetch students failed',err);setMessage({type:'error',text:'Unable to load students. Backend may be down.'});}}async function addStudent(student){try{const res=await fetch('http://127.0.0.1:5000/students',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(student)});const body=await res.json();if(!res.ok){setMessage({type:'error',text:body.error||'Failed to add'});return;}setStudents(prev=>[...prev,body]);setMessage({type:'success',text:'Student added!'});setTimeout(()=>setMessage(null),2000);}catch(err){console.error(err);setMessage({type:'error',text:'Network error while adding student'});}}async function deleteStudent(id){if(!window.confirm('Delete this student?'))return;try{const res=await fetch(\"http://127.0.0.1:5000/students/\".concat(id),{method:'DELETE'});if(!res.ok){setMessage({type:'error',text:'Failed to delete'});return;}setStudents(prev=>prev.filter(s=>s.id!==id));setMessage({type:'success',text:'Student deleted'});setTimeout(()=>setMessage(null),1500);}catch(err){console.error(err);setMessage({type:'error',text:'Network error while deleting'});}}// handle login\nfunction handleLogin(u){setUser(u);}// handle logout\nfunction handleLogout(){setUser(null);setStudents([]);}if(!user){return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uD83C\\uDF93 Student Record System\"}),showSignup?/*#__PURE__*/_jsx(SignupForm,{onSignup:()=>setShowSignup(false)}):/*#__PURE__*/_jsx(LoginForm,{onLogin:handleLogin}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowSignup(!showSignup),children:showSignup?\"Back to Login\":\"Sign Up\"})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uD83C\\uDF93 Student Record System\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,style:{position:'absolute',right:20,top:20},children:\"Logout\"}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"message \".concat(message.type==='success'?'success':'error'),children:message.text}),/*#__PURE__*/_jsx(\"div\",{className:\"controls\",children:/*#__PURE__*/_jsx(StudentForm,{courses:COURSES,onAdd:addStudent})}),/*#__PURE__*/_jsx(\"div\",{className:\"grid\",children:students.map(s=>/*#__PURE__*/_jsxs(\"div\",{className:\"card\",children:[/*#__PURE__*/_jsx(\"h3\",{children:s.name}),/*#__PURE__*/_jsx(\"p\",{children:s.course}),/*#__PURE__*/_jsxs(\"div\",{className:\"actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"edit\",onClick:()=>{const newName=prompt('New name',s.name);const newCourse=prompt('New course',s.course);if(newName&&newCourse){fetch(\"http://127.0.0.1:5000/students/\".concat(s.id),{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify({name:newName,course:newCourse})}).then(()=>fetchStudents());}},children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete\",onClick:()=>deleteStudent(s.id),children:\"Delete\"})]})]},s.id))})]});}export default App;","map":{"version":3,"names":["React","useEffect","useState","StudentForm","LoginForm","SignupForm","jsx","_jsx","jsxs","_jsxs","COURSES","App","students","setStudents","message","setMessage","user","setUser","showSignup","setShowSignup","fetchStudents","res","fetch","ok","Error","data","json","err","console","error","type","text","addStudent","student","method","headers","body","JSON","stringify","prev","setTimeout","deleteStudent","id","window","confirm","concat","filter","s","handleLogin","u","handleLogout","className","children","onSignup","onLogin","onClick","style","position","right","top","courses","onAdd","map","name","course","newName","prompt","newCourse","then"],"sources":["/home/wambui/Student-record/frontend/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport StudentForm from './components/StudentForm';\nimport LoginForm from './components/LoginForm';\nimport SignupForm from './components/SignupForm';\n\nconst COURSES = [\n  'Mathematics','Physics','Computer Science','Chemistry','Biology',\n  'History','Economics','Philosophy','Engineering','Art'\n];\n\nfunction App() {\n  const [students, setStudents] = useState([]);\n  const [message, setMessage] = useState(null);\n  const [user, setUser] = useState(null);        // logged-in user\n  const [showSignup, setShowSignup] = useState(false);  // toggle signup/login\n\n  // fetch students only if logged in\n  useEffect(() => { if(user) fetchStudents() }, [user]);\n\n  async function fetchStudents(){\n    try{\n      const res = await fetch('http://127.0.0.1:5000/students');\n      if(!res.ok) throw new Error('Network response not ok');\n      const data = await res.json();\n      setStudents(data);\n    }catch(err){\n      console.error('Fetch students failed', err);\n      setMessage({type:'error', text:'Unable to load students. Backend may be down.'});\n    }\n  }\n\n  async function addStudent(student){\n    try{\n      const res = await fetch('http://127.0.0.1:5000/students', {\n        method:'POST',\n        headers:{'Content-Type':'application/json'},\n        body: JSON.stringify(student)\n      });\n      const body = await res.json();\n      if(!res.ok){ setMessage({type:'error', text: body.error || 'Failed to add'}); return; }\n      setStudents(prev => [...prev, body]);\n      setMessage({type:'success', text:'Student added!'});\n      setTimeout(()=>setMessage(null),2000);\n    }catch(err){\n      console.error(err);\n      setMessage({type:'error', text:'Network error while adding student'});\n    }\n  }\n\n  async function deleteStudent(id){\n    if(!window.confirm('Delete this student?')) return;\n    try{\n      const res = await fetch(`http://127.0.0.1:5000/students/${id}`, { method:'DELETE'});\n      if(!res.ok){ setMessage({type:'error', text:'Failed to delete'}); return; }\n      setStudents(prev => prev.filter(s=>s.id!==id));\n      setMessage({type:'success', text:'Student deleted'});\n      setTimeout(()=>setMessage(null),1500);\n    }catch(err){\n      console.error(err);\n      setMessage({type:'error', text:'Network error while deleting'});\n    }\n  }\n\n  // handle login\n  function handleLogin(u){\n    setUser(u);\n  }\n\n  // handle logout\n  function handleLogout(){\n    setUser(null);\n    setStudents([]);\n  }\n\n  if(!user){\n    return (\n      <div className=\"App\">\n        <h1>ðŸŽ“ Student Record System</h1>\n        {showSignup \n          ? <SignupForm onSignup={() => setShowSignup(false)} /> \n          : <LoginForm onLogin={handleLogin} />}\n        <button onClick={() => setShowSignup(!showSignup)}>\n          {showSignup ? \"Back to Login\" : \"Sign Up\"}\n        </button>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"App\">\n      <h1>ðŸŽ“ Student Record System</h1>\n      <button onClick={handleLogout} style={{position:'absolute', right:20, top:20}}>Logout</button>\n      {message && <div className={`message ${message.type==='success'?'success':'error'}`}>{message.text}</div>}\n      <div className=\"controls\">\n        <StudentForm courses={COURSES} onAdd={addStudent} />\n      </div>\n      <div className=\"grid\">\n        {students.map(s=> (\n          <div className=\"card\" key={s.id}>\n            <h3>{s.name}</h3>\n            <p>{s.course}</p>\n            <div className=\"actions\">\n              <button className=\"edit\" onClick={()=>{\n                const newName = prompt('New name', s.name);\n                const newCourse = prompt('New course', s.course);\n                if(newName && newCourse){\n                  fetch(`http://127.0.0.1:5000/students/${s.id}`, {\n                    method:'PUT',\n                    headers:{'Content-Type':'application/json'},\n                    body:JSON.stringify({name:newName, course:newCourse})\n                  }).then(()=>fetchStudents())\n                }\n              }}>Edit</button>\n              <button className=\"delete\" onClick={()=>deleteStudent(s.id)}>Delete</button>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}